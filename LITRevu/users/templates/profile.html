{% extends 'base_template.html' %}
{% load static %}
{% block title %}LITRevu - Profile{% endblock %}
{% block optional_css %}
<link rel="stylesheet" href="{% static 'css/users_styles.css' %}">
{% endblock %}

{% block content %}
<h2>Edit Profile</h2>
<div class="profile-section">
    <span>Email: {{ user.email }}</span>
    <a href="{% url 'update_email' %}">Change Email</a>
</div>

<div class="profile-section">
    <span>Username: {{ user.username }}</span>
    <a href="{% url 'update_username' %}">Change Username</a>
</div>
<li><a href="{% url 'update_password' %}">Change Password</a></li>
<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <div class="form-group">
        <label for="{{ form.profile_picture.id_for_label }}">Profile Picture:</label>
        <div>
        {% if user.profile.profile_picture %}
            <img id="profile-picture-preview" src="{{ user.profile.profile_picture.url }}" alt="Profile Picture" style="max-width: 200px;">
        {% else %}
            <img id="profile-picture-preview" src="{% static 'images/PPPlaceholder.PNG' %}" alt="Profile Picture" style="max-width: 200px;">
        {% endif %}        
        </div>
        {{ form.profile_picture }}
        {% if form.profile_picture.errors %}
            <div class="error">{{ form.profile_picture.errors }}</div>
        {% endif %}
    </div>
    <div class="form-group">
        <label for="{{ form.date_of_birth.id_for_label }}">Date of Birth:</label>
        {{ form.date_of_birth }}
        {% if form.date_of_birth.errors %}
            <div class="error">{{ form.date_of_birth.errors }}</div>
        {% endif %}
    </div>
    <button type="submit">Save changes</button>
</form>
{% endblock %}

{% block js %}<script src="{% static 'js/profile_picture_script.js' %}"></script>{% endblock %}
